{"version":3,"sources":["apiServises/PixabayAPI.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","App.js","index.js"],"names":["api","fetchImages","nextName","page","fetch","then","response","ok","json","Searchbar","state","imageSearch","handleNameChange","event","setState","currentTarget","value","toLowerCase","hendleSubmit","preventDefault","trim","props","onSubmit","toast","className","this","type","onClick","placeholder","name","onChange","Component","ImageGalleryItem","id","tags","smallImage","largeImage","onClickItem","alt","src","ImageGallery","images","toggleModal","map","webformatURL","largeImageURL","App","color","height","width","timeout","visible","Button","loadMore","Modal","handleEscClick","e","code","closeModal","window","addEventListener","removeEventListener","image","tabIndex","handleFormSubmit","showModal","biggerImage","status","buttonMore","error","bind","prevProps","prevState","prevName","prevPage","nextPage","API","data","hits","scrollTo","top","document","documentElement","scrollHeight","behavior","catch","length","autoClose","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.dbfea7b1.chunk.js","sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\n\nfunction fetchImages(nextName, page) {\n  return fetch(\n    `${BASE_URL}?q=${nextName}&page=${page}&key=22948262-953a9601ef8ec29dc611c2152&image_type=photo&orientation=horizontal&per_page=12\n`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n  });\n}\nconst api = { fetchImages };\nexport default api;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport \"./Searchbar.css\";\n\nexport default class Searchbar extends Component {\n  state = {\n    imageSearch: \"\",\n  };\n  handleNameChange = (event) => {\n    this.setState({ imageSearch: event.currentTarget.value.toLowerCase() });\n  };\n  hendleSubmit = (event) => {\n    event.preventDefault();\n    if (this.state.imageSearch.trim() === \"\") {\n      toast(\"Введите Ваш запрос\");\n      return;\n    }\n    this.props.onSubmit(this.state.imageSearch);\n    this.setState({ imageSearch: \"\" });\n  };\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.props.onSubmit} className=\"SearchForm\">\n          <button\n            type=\"submit\"\n            className=\"SearchForm-button\"\n            onClick={this.hendleSubmit}\n          >\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            placeholder=\"Search images and photos\"\n            name=\"imageSearch\"\n            value={this.state.imageSearch}\n            onChange={this.handleNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n  imageSearch: PropTypes.string,\n};\n","import \"./ImageGalleryItem.css\";\n\nexport default function ImageGalleryItem({\n  id,\n  tags,\n  smallImage,\n  largeImage,\n  onClickItem,\n}) {\n  return (\n    <li key={id} className=\"ImageGalleryItem\">\n      <img\n        className=\"ImageGalleryItem-image\"\n        alt={tags}\n        src={smallImage}\n        data-source={largeImage}\n        onClick={() => {\n          onClickItem(largeImage);\n        }}\n      />\n    </li>\n  );\n}\n","import ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\n\nimport \"./ImageGallery.css\";\n\nexport default function ImageGallery({ images, toggleModal }) {\n  return (\n    <ul className=\"ImageGallery\">\n      {images.map(({ id, tags, webformatURL, largeImageURL }) => (\n        <ImageGalleryItem\n          key={id}\n          tags={tags}\n          smallImage={webformatURL}\n          largeImage={largeImageURL}\n          onClickItem={() => {\n            toggleModal(largeImageURL);\n          }}\n        />\n      ))}\n    </ul>\n  );\n}\n","import React, { Component } from \"react\";\n\nimport Loader from \"react-loader-spinner\";\n\nexport default class App extends Component {\n  //other logic\n  render() {\n    return (\n      <Loader\n        type=\"Puff\"\n        color=\"#00BFFF\"\n        height={100}\n        width={100}\n        timeout={3000} //3 secs\n        visible={true}\n      />\n    );\n  }\n}\n","import './Button.css';\n\nexport default function Button({ loadMore }) {\n  return (\n    <button className=\"Button\" type=\"button\" onClick={loadMore}>\n      Load more\n    </button>\n  );\n}\n","import { Component } from \"react/cjs/react.production.min\";\n\nimport PropTypes, { string } from \"prop-types\";\n\nimport \"./Modal.css\";\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleEscClick);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleEscClick);\n  }\n\n  handleEscClick = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.closeModal();\n    }\n  };\n\n  render() {\n    const { onClick, image } = this.props;\n    return (\n      <div className=\"Overlay\" onClick={onClick} tabIndex=\"0\">\n        <div className=\"Modal\">\n          <img src={image} alt={image.tags} />\n        </div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  onClick: PropTypes.func,\n  image: string,\n  closeModal: PropTypes.func,\n};\n","import React, { Component } from \"react\";\n\nimport { ToastContainer } from \"react-toastify\";\n\nimport API from \"./apiServises/PixabayAPI\";\n\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport Loader from \"./components/Loader/Loader\";\nimport Button from \"./components/Button/Button\";\nimport Modal from \"./components/Modal/Modal\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      imageSearch: \"\",\n      images: [],\n      status: \"idle\",\n      page: 1,\n      buttonMore: false,\n      biggerImage: \"\",\n      showModal: false,\n      error: \"\",\n    };\n\n    this.loadMore = this.loadMore.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevName = prevState.imageSearch;\n    const nextName = this.state.imageSearch;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevName !== nextName) {\n      this.setState({ status: \"pending\", page: 1, images: [] });\n      this.fetchImages(nextName, nextPage);\n    }\n    if (prevPage !== nextPage) {\n      this.fetchImages(nextName, nextPage);\n    }\n  }\n\n  fetchImages(nextName, nextPage) {\n    API.fetchImages(nextName, nextPage)\n      .then((data) => {\n        this.setState((prevState) => {\n          return {\n            prevState,\n            images: [...prevState.images, ...data.hits],\n            status: \"resolved\",\n            imageSearch: nextName,\n          };\n        });\n\n        if (this.prevPage !== nextPage) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: \"smooth\",\n          });\n        }\n      })\n      .catch((error) => this.setState({ error, status: \"rejected\" }));\n  }\n\n  handleFormSubmit = (name) => {\n    this.fetchImages(name, this.state.page);\n  };\n\n  toggleModal = (largeImageURL) => {\n    this.setState(({ showModal, biggerImage }) => ({\n      showModal: !showModal,\n      biggerImage: largeImageURL,\n    }));\n  };\n\n  closeModal = () => {\n    this.setState(() => ({\n      showModal: false,\n    }));\n  };\n\n  loadMore() {\n    this.setState((prevState) => ({\n      page: prevState.page + 1,\n    }));\n  }\n\n  render() {\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        {this.state.status === \"idle\" && <p>Введите ваш запрос...</p>}\n        <ImageGallery\n          images={this.state.images}\n          toggleModal={(largeImageURL) => this.toggleModal(largeImageURL)}\n        />\n        {this.state.status === \"pending\" && <Loader />}\n        {this.state.images.length !== 0 && <Button loadMore={this.loadMore} />}\n\n        {this.state.showModal && (\n          <Modal\n            onClick={() => {\n              this.toggleModal();\n            }}\n            image={this.state.biggerImage}\n            closeModal={this.closeModal}\n          />\n        )}\n        <ToastContainer autoClose={3000} />\n        {this.state.images.length === 0 && this.state.status === \"resolved\" ? (\n          <div>По запросу {this.state.imageSearch} ничего не найдено</div>\n        ) : null}\n        {this.state.status === \"rejected\" && <div>{this.state.error}</div>}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector(\"#root\")\n);\n"],"sourceRoot":""}